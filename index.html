<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>OGPS Fish Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- [Your existing <style>] remains unchanged -->
    <!-- Iâ€™ll omit the <style> section here to focus on the script and logic changes -->
</head>
<body>
    <div class="header">
        <div class="title">OGPS FISH CALCULATOR</div>
        <div class="display-container">
            <div class="gem-display" id="result">FISH GEMS: 0</div>
            <div class="rate-container">
                <span class="rate-label">GEM RATE:</span>
                <input type="number" class="rate-input" id="gemRate" value="3000" min="1">
            </div>
            <div class="bytes-display" id="bytesResult">BYTES: 0</div>
        </div>
    </div>
    
    <div class="fish-container" id="fishContainer">
        <!-- Fish cards will be generated by JavaScript -->
    </div>
    
    <div class="footer">
        <span class="rainbow-text">Discord: @.Demon.death</span>
    </div>

    <script>
        const fishData = [
            { name: "Acid Puffer", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Butterflyfish", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Carp", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Crab", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Dumbfish", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Goldfish", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Halibut", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Herring", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Kingfish", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Piranha", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "SeaAngler", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] },
            { name: "Tuna", sizes: ["Tiny", "Small", "Medium", "Large", "Huge"] }
        ];

        const gemValues = {
            "acidpuffer": { tiny: 80, small: 320, medium: 560, large: 800, huge: 2400 },
            "butterflyfish": { tiny: 15, small: 60, medium: 105, large: 150, huge: 450 },
            "carp": { tiny: 20, small: 80, medium: 140, large: 200, huge: 600 },
            "crab": { tiny: 5, small: 10, medium: 20, large: 40, huge: 80 },
            "dumbfish": { tiny: 5, small: 10, medium: 30, large: 50, huge: 100 },
            "goldfish": { tiny: 15, small: 60, medium: 105, large: 150, huge: 450 },
            "halibut": { tiny: 20, small: 80, medium: 140, large: 200, huge: 600 },
            "herring": { tiny: 10, small: 40, medium: 70, large: 100, huge: 300 },
            "kingfish": { tiny: 10, small: 40, medium: 70, large: 100, huge: 300 },
            "piranha": { tiny: 30, small: 120, medium: 210, large: 300, huge: 900 },
            "seaangler": { tiny: 30, small: 120, medium: 210, large: 300, huge: 900 },
            "tuna": { tiny: 40, small: 160, medium: 280, large: 400, huge: 1200 }
        };

        const container = document.getElementById('fishContainer');
        const gemRateInput = document.getElementById('gemRate');

        fishData.forEach(fish => {
            const card = document.createElement('div');
            card.className = 'fish-card';

            const nameElement = document.createElement('div');
            nameElement.className = 'fish-name';
            nameElement.innerHTML = fish.name === "Piranha" 
                ? `<small>${fish.name} <span style="font-size:10px;">(Perilous Piranhas mini event)</span></small>` 
                : fish.name;
            card.appendChild(nameElement);

            fish.sizes.forEach(size => {
                const control = document.createElement('div');
                control.className = 'size-control';

                const label = document.createElement('div');
                label.className = 'size-label';
                label.textContent = size;
                control.appendChild(label);

                const minusBtn = document.createElement('button');
                minusBtn.className = 'btn minus';
                minusBtn.textContent = '-';
                control.appendChild(minusBtn);

                const input = document.createElement('input');
                input.className = 'fish-input';
                input.type = 'number';
                input.id = `${fish.name.toLowerCase().replace(' ', '-')}-${size.toLowerCase()}`;
                input.value = '0';
                input.min = '0';
                control.appendChild(input);

                const plusBtn = document.createElement('button');
                plusBtn.className = 'btn plus';
                plusBtn.textContent = '+';
                control.appendChild(plusBtn);

                minusBtn.addEventListener('click', () => {
                    const value = parseInt(input.value) || 0;
                    if (value > 0) input.value = value - 1;
                    calculateTotals();
                });

                plusBtn.addEventListener('click', () => {
                    const value = parseInt(input.value) || 0;
                    input.value = value + 1;
                    calculateTotals();
                });

                input.addEventListener('input', calculateTotals);
                input.addEventListener('focus', function () {
                    this.select();
                });

                card.appendChild(control);
            });

            container.appendChild(card);
        });

        function calculateTotals() {
            let totalGems = 0;

            fishData.forEach(fish => {
                const fishKey = fish.name.toLowerCase().replace(' ', '');
                fish.sizes.forEach(size => {
                    const input = document.getElementById(`${fish.name.toLowerCase().replace(' ', '-')}-${size.toLowerCase()}`);
                    const value = parseInt(input.value) || 0;
                    const sizeKey = size.toLowerCase();
                    const gemValue = (gemValues[fishKey] && gemValues[fishKey][sizeKey]) || 0;
                    totalGems += value * gemValue;
                });
            });

            const gemRate = parseInt(gemRateInput.value) || 3000;
            const totalBytes = Math.floor((totalGems / gemRate) * 219);

            document.getElementById('result').textContent = `FISH GEMS: ${totalGems.toLocaleString()}`;
            document.getElementById('bytesResult').textContent = `BYTES: ${totalBytes.toLocaleString()}`;
        }

        calculateTotals();

        gemRateInput.addEventListener('input', calculateTotals);
        gemRateInput.addEventListener('focus', function () {
            this.select();
        });

        document.addEventListener('keydown', function (e) {
            if (e.target.classList.contains('fish-input')) {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    e.target.value = (parseInt(e.target.value) || 0) + 1;
                    calculateTotals();
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    const newValue = (parseInt(e.target.value) || 0) - 1;
                    if (newValue >= 0) {
                        e.target.value = newValue;
                        calculateTotals();
                    }
                }
            }
        });
    </script>
</body>
</html>
